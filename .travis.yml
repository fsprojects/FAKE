language: csharp
sudo: required
dist: trusty # Ubuntu 14.04

env:
 - HOME=/home/travis APPDATA=/home/travis LocalAppData=/home/travis

addons:
  apt:
    packages:
      - libunwind8

before_script:
  - wget https://ci.appveyor.com/api/buildjobs/iehwxgkgv7qcewrc/artifacts/nuget%2Fdotnetcore%2FFake.netcore%2Ffake-dotnetcore-ubuntu.14.04-x64.zip -O /tmp/fake-dotnetcore-ubuntu.14.04-x64.zip
  - mkdir fake-dotnetcore
  - unzip /tmp/fake-dotnetcore-ubuntu.14.04-x64.zip -d fake-dotnetcore || echo unzip returned $?
  - export PATH=$PATH:$PWD/fake-dotnetcore/
  - chmod +x $PWD/fake-dotnetcore/dotnet
  - export FAKE="$PWD/fake-dotnetcore/dotnet $PWD/fake-dotnetcore/Fake.dll"
  
before install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update               ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install openssl      ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew link --force openssl ; fi

mono:
  - 4.8.1
  - latest

matrix:
  allow_failures:
    - mono: latest


script: 
  - $FAKE run build.fsx
#  - ./build.sh

branches:
  except:
    - gh-pages
