<!DOCTYPE HTML>

<html>
	<head>
		<title>Generating AssemblyInfo files
</title>
		<meta charset="utf-8" />
		<meta name="author" content="Steffen Forkmann, Mauricio Scheffer, Colin Bull, Matthias Dittrich" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link type="text/css" rel="stylesheet" href="assets/css/style.css">
		<!--<link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">-->
		<link rel="stylesheet" href="assets/css/iconmonstr-iconic-font.css" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
	</head>
	<body class="no-sidebar">
		<div id="page-wrapper">


			<!-- Header Wrapper -->
				<div id="header-wrapper">
					<div class="container">
						<!-- Header -->
							<header id="header">
								<div class="inner">

									<!-- Logo -->
										<h1><a href="index.html" id="logo">FAKE 5</a></h1>

									<!-- Nav -->
										<nav id="nav">
											<ul>
												<li >
													<a href="legacy-index.html">FAKE 4</a>
													<ul>
														<li><a href="legacy-gettingstarted.html">Getting Started Tutorial</a></li>
														<li><a href="help-docs.html">Where is XYZ???</a></li>
														<li><a href="legacy-commandline.html">Running FAKE from command line</a></li>
														<li><a href="legacy-core-targets.html">Targets</a></li>
													</ul>
												</li>
                                                <li >
                                                    <a href="fake-what-is-fake.html">Tutorials</a>
                                                    <ul>
                                                        <li><a href="fake-gettingstarted.html">Getting Started Tutorial</a></li>
                                                        <li><a href="fake-cache.html">Build script caching</a></li>
                                                        <li><a href="fake-commandline.html">Running FAKE from command line</a></li>
                                                        <li><a href="fake-dotnetcore.html">FAKE 5 quickstart</a></li>
                                                        <li><a href="fake-migrate-to-fake-5.html">FAKE 5 migration</a></li>
                                                    </ul>
                                                </li>
												<li >
													<a href="fake-what-is-fake.html">Project</a>
													<ul>
														<li><a href="help-users.html">Who is using FAKE?</a></li>
														<li><a href="https://www.nuget.org/packages/FAKE">NuGet</a></li>
														<li><a href="https://chocolatey.org/packages/fake">Chocolatey</a></li>
														<li><a href="https://github.com/fsharp/FAKE"><i style="font-size: 15px;" class="im im-github"></i> GitHub</a></li>
														<li><a href="https://github.com/fsharp/FAKE/blob/master/License.txt">License</a></li>
														<li><a href="RELEASE_NOTES.html">Release Notes</a></li>
														<li><a href="contributing.html">Contributing</a></li>
														<li><a href="https://github.com/fsharp/FAKE/issues/new"><i style="font-size: 15px;" class="im im-mail"></i> Ask a question or report a bug</a></li>
													</ul>
												</li>
												<li class="current_page_item">
													<a href="fake-fake5-modules.html">Modules</a>
													<ul>
														<li>
															<a href="apidocs/index.html#Fake.Api">API</a>
															<ul>
																<li><a href="api-slack.html">Slack</a></li>
															</ul>
														</li>
														<li>
															<a href="core.html">Core</a>
															<ul>
																<li><a href="core-targets.html">Targets</a></li>
																<li><a href="apidocs/fake-core-globbing-operators.html">Globbing</a></li>
																<li><a href="apidocs/fake-core-environment.html.html">Environment</a></li>
																<li><a href="core-process.html">Process</a></li>
																<li><a href="apidocs/fake-core-string.html">String</a></li>
																<li><a href="apidocs/fake-core-buildserver.html">BuildServer</a></li>
																<li><a href="apidocs/fake-core-trace.html">Tracing</a></li>
																<li><a href="apidocs/fake-core-context.html">Context</a></li>
																<li><a href="apidocs/fake-core-xml.html">Xml</a></li>
																<li><a href="apidocs/fake-core-taskrunner.html">Tasks</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.IO">IO</a>
															<ul>
																<li><a href="apidocs/index.html#Fake.IO">FileSystem</a></li>
																<li><a href="apidocs/fake-io-zip.html#Functions and values">Zip</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.DotNet">DotNet</a>
															<ul>
																<li><a href="apidocs/fake-dotnet-cli.html">Cli</a></li>
																<li><a href="dotnet-assemblyinfo.html">AssemblyInfoFile</a></li>
																<li><a href="apidocs/fake-dotnet-msbuild.html">MsBuild</a></li>
																<li><a href="apidocs/fake-dotnet-testing-nunit3.html">Testing - NUnit</a></li>
																<li><a href="apidocs/fake-dotnet-testing-mspec.html">Testing - MSpec</a></li>
																<li><a href="apidocs/fake-dotnet-testing-xunit2.html">Testing - XUnit2</a></li>
																<li><a href="dotnet-testing-opencover.html">Testing - OpenCover</a></li>
																<li><a href="dotnet-nuget.html">NuGet</a></li>
																<li><a href="apidocs/fake-dotnet-paket.html">Paket</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.Net">Net</a>
															<ul>
																<li><a href="net-http.html">Http</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.Tools.Git">Tools</a>
															<ul>
																<li><a href="apidocs/index.html#Fake.Tools.Git">Git</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.Windows">Windows</a>
															<ul>
																<li><a href="windows-chocolatey.html">Chocolatey</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.Testing">Testing</a>
															<ul>
																<li><a href="testing-sonarqube.html">SonarQube</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake">Legacy / Not Migrated</a>
															<ul>
																<li><a href="todo-fluentmigrator.html">?.?.FluentMigrator</a></li>
																<li><a href="todo-androidpublisher.html">?.?.AndroidPublisher</a></li>
																<li><a href="todo-watch.html">IO.FileWatcher</a></li>
																<li><a href="todo-wix.html">Windows.WiX</a></li>
																<li><a href="todo-msteamsnotification.html">API.MsTeams</a></li>
																<li><a href="todo-stylecop.html">DotNet.StyleCop</a></li>
																<li><a href="todo-deploy.html">Fake.Deploy</a></li>
																<li><a href="todo-iis.html">?.?.IIS</a></li>
																<li><a href="todo-dacpac.html">?.?.DacPac</a></li>
																<li><a href="todo-vagrant.html">?.?.Vagrant</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake">Legacy / Not Migrated (2)</a>
															<ul>
																<li><a href="todo-fxcop.html">DotNet.FxCop</a></li>
																<li><a href="todo-fsc.html">DotNet.Fsc</a></li>
																<li><a href="todo-teamcity.html">BuildServer.TeamCity</a></li>
																<li><a href="todo-teamcityadvanced.html">BuildServer.TeamCity.Advanced</a></li>
																<li><a href="todo-canopy.html">DotNet.Testing.Canopy</a></li>
																<li><a href="todo-octopusdeploy.html">?.?.OctopusDeploy</a></li>
																<li><a href="todo-typescript.html">JavaScript?.TypeScript</a></li>
																<li><a href="todo-azurewebjobs.html">Cloud.Azure.WebJobs</a></li>
																<li><a href="todo-azurecloudservices.html">Cloud.Azure.CloudService</a></li>
															</ul>
														</li>
													</ul>
												</li>
												<li ><a href="apidocs/index.html">API Reference</a></li>
											</ul>
										</nav>

								</div>
							</header>

						<!-- Banner -->
							

					</div>
				</div>

			<!-- Main Wrapper -->
				<div id="main-wrapper">
          			

					<div class="wrapper style2">
						<div class="inner">
							<div class="container">
								<div id="content">

									<!-- Content -->
                      <article>
<h1><a name="Generating-AssemblyInfo-files" class="anchor" href="#Generating-AssemblyInfo-files">Generating AssemblyInfo files</a></h1>
<p><strong>Note:  This documentation is for FAKE.exe after version 5. The documentation for previous version (&lt;=4) can be found <a href="legacy-assemblyinfo.html">here</a>! </strong></p>
<p>In this article the AssemblyInfo task is used in order to set specific version information to .NET assemblies.</p>
<p>If you succeeded with the <a href="gettingstarted.html">Getting Started tutorial</a>, then you just have to modify your <em>BuildApp</em> target to the following:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="pp">#r</span> <span class="s">&quot;paket:</span>
<span class="s">nuget Fake.DotNet.AssemblyInfo</span>
<span class="s">nuget Fake.Core.Target //&quot;</span>
<span class="k">open</span> <span class="id">Fake</span><span class="pn">.</span><span class="id">DotNet</span>

<span class="id">Target</span><span class="pn">.</span><span class="id">Create</span> <span class="s">&quot;BuildApp&quot;</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">_</span> <span class="k">-&gt;</span>
	<span class="id">AssemblyInfoFile</span><span class="pn">.</span><span class="id">CreateCSharp</span> <span class="s">&quot;./src/app/Calculator/Properties/AssemblyInfo.cs&quot;</span>
		<span class="pn">[</span><span class="id">AssemblyInfo</span><span class="pn">.</span><span class="id">Title</span> <span class="s">&quot;Calculator Command line tool&quot;</span>
			<span class="id">AssemblyInfo</span><span class="pn">.</span><span class="id">Description</span> <span class="s">&quot;Sample project for FAKE - F# MAKE&quot;</span>
			<span class="id">AssemblyInfo</span><span class="pn">.</span><span class="id">Guid</span> <span class="s">&quot;A539B42C-CB9F-4a23-8E57-AF4E7CEE5BAA&quot;</span>
			<span class="id">AssemblyInfo</span><span class="pn">.</span><span class="id">Product</span> <span class="s">&quot;Calculator&quot;</span>
			<span class="id">AssemblyInfo</span><span class="pn">.</span><span class="id">Version</span> <span class="id">version</span>
			<span class="id">AssemblyInfo</span><span class="pn">.</span><span class="id">FileVersion</span> <span class="id">version</span><span class="pn">]</span>

	<span class="id">AssemblyInfoFile</span><span class="pn">.</span><span class="id">CreateFSharp</span> <span class="s">&quot;./src/app/CalculatorLib/Properties/AssemblyInfo.fs&quot;</span>
		<span class="pn">[</span><span class="id">AssemblyInfo</span><span class="pn">.</span><span class="id">Title</span> <span class="s">&quot;Calculator library&quot;</span>
			<span class="id">AssemblyInfo</span><span class="pn">.</span><span class="id">Description</span> <span class="s">&quot;Sample project for FAKE - F# MAKE&quot;</span>
			<span class="id">AssemblyInfo</span><span class="pn">.</span><span class="id">Guid</span> <span class="s">&quot;EE5621DB-B86B-44eb-987F-9C94BCC98441&quot;</span>
			<span class="id">AssemblyInfo</span><span class="pn">.</span><span class="id">Product</span> <span class="s">&quot;Calculator&quot;</span>
			<span class="id">AssemblyInfo</span><span class="pn">.</span><span class="id">Version</span> <span class="id">version</span>
			<span class="id">AssemblyInfo</span><span class="pn">.</span><span class="id">FileVersion</span> <span class="id">version</span><span class="pn">]</span>

	<span class="id">MSBuild</span><span class="pn">.</span><span class="id">MSBuildRelease</span> <span class="id">buildDir</span> <span class="s">&quot;Build&quot;</span> <span class="id">appReferences</span>
		<span class="o">|&gt;</span> <span class="id">Log</span> <span class="s">&quot;AppBuild-Output: &quot;</span>
<span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<p>As you can see generating an AssemblyInfo.cs file is pretty easy with FAKE. You can read more about the C# and F# AssemblyInfo tasks in the <a href="apidocs/fake-assemblyinfofile.html">API docs</a>.</p>
<h2><a name="Setting-the-version-no" class="anchor" href="#Setting-the-version-no">Setting the version no.</a></h2>
<p>The version parameter can be declared as a property or fetched from a build server like TeamCity:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">version</span> <span class="o">=</span>
  <span class="k">match</span> <span class="id">buildServer</span> <span class="k">with</span>
  <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="id">TeamCity</span> <span class="k">-&gt;</span> <span class="id">buildVersion</span>
  <span class="pn">|</span> <span class="id">_</span> <span class="k">-&gt;</span> <span class="s">&quot;0.2&quot;</span>
</code></pre></td>
</tr>
</table>
<p><img src="pics/assemblyinfo/result.png" alt="alt text" title="The file version is set by FAKE" /></p>
<h2><a name="Storing-the-githash-in-the-AssemblyInfo" class="anchor" href="#Storing-the-githash-in-the-AssemblyInfo">Storing the githash in the AssemblyInfo</a></h2>
<p>Storing the githash with the assembly can make it easier to identify exactly what code is running. There isn't an attribute that
directly fits with doing this, but one way is by storing it as Metadata (warning: this attribute is only available in .NET 4.5 and above)</p>
<p>If your solution is inside a git repository you can get the git hash like this (remember to <code>open Fake.Git</code>):</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="id">commitHash</span> <span class="o">=</span> <span class="id">Information</span><span class="pn">.</span><span class="id">getCurrentHash</span><span class="pn">(</span><span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<p>And set like this:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="id">AssemblyInfo</span><span class="pn">.</span><span class="id">Metadata</span><span class="pn">(</span><span class="s">&quot;githash&quot;</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs3', 4)" onmouseover="showTip(event, 'fs3', 4)" class="id">commitHash</span><span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<p>One of the easiest ways to retrieve this hash is to load use a reflector program, like <a href="https://github.com/icsharpcode/ILSpy">ILSpy</a>:</p>
<p><img src="pics/assemblyinfo/assemblymetadata.png" alt="alt text" title="Checking the git hash of an assembly" /></p>
<h2><a name="Using-the-SolutionInfo-approach" class="anchor" href="#Using-the-SolutionInfo-approach">Using the SolutionInfo approach</a></h2>
<p>Some companies split their AssemblyInfo into a SolutionInfo.cs which is shared by all projects and a specific AssemblyInfo per project which contains the product data.
All versioning data is generated by the AssemblyInfo task into the SolutionInfo.cs and the AssemblyInfo files are edited manually. This could look like this:</p>
<p><img src="pics/assemblyinfo/solutioninfo.png" alt="alt text" title="SolutionInfo.cs is shared between projects" /></p>
<p>The generated SolutionInfo.cs looks like this:</p>
<p><img src="pics/assemblyinfo/generated.png" alt="alt text" title="Generated SolutionInfo.cs" /></p>

<div class="tip" id="fs1">val version : string</div>
<div class="tip" id="fs2">val TeamCity : obj</div>
<div class="tip" id="fs3">val commitHash : obj</div>

                      </article>
								</div>
							</div>
						</div>
					</div>

				</div>

			<!-- Footer Wrapper -->
				<div id="footer-wrapper">
					<footer id="footer" class="container">
						<div class="row">
							<div class="3u 12u(mobile)">

								<!-- Links -->
									<section>
										<h2>Important Links</h2>
										<ul class="divided">
											<li><a href="fake-gettingstarted.html">Getting started</a></li>
											<li><a href="fake-fake5-modules.html">Modules</a></li>
											<li><a href="fake-fake5-modules.html#Declaring-FAKE-5-Header">FAKE Header</a></li>
										</ul>
									</section>

							</div>
							<div class="3u 12u(mobile)">

								<!-- Links -->
									<section>
										<h2>Further projects</h2>
										<ul class="divided">
											<li><a href="https://fsprojects.github.io/Paket/">Paket</a></li>
											<li><a href="https://fsprojects.github.io/FSharp.Formatting/">FSharp Formatting</a></li>
											<li><a href="http://fsharp.org/">F#</a></li>
											<li><a href="http://ionide.io/">Ionide</a></li>
											<li><a href="http://forge.run/">Forge</a></li>
											<li><a href="https://fsharp.github.io/FSharp.Compiler.Service/">FSharp.Compiler.Service</a></li>
										</ul>
									</section>

								<!-- Links 
									<section>
										<h2>Learn F#</h2>
										<ul class="divided">
											<li><a href="404.html">Tutorial 1</a></li>
											<li><a href="404.html">Tutorial 2</a></li>
											<li><a href="404.html">Tutorial 3</a></li>
											<li><a href="404.html">Tutorial 4</a></li>
										</ul>
									</section>-->

							</div>
							<div class="6u 12u(mobile)">

								<!-- About -->
									<section>
										<h2><strong>FAKE 5</strong> is a community effort.</h2>
										<p>Please help with the development of <strong>FAKE 5</strong>, a free, fully open source
										DSL and Runtime for running F# scripts. Look at the open issues at <a href="https://github.com/fsharp/FAKE/issues">Github</a>,
                                        discuss new features, fix bugs and send pull requests!</p>
										<a href="contributing.html" class="button alt icon fa-arrow-circle-right">Learn More</a>
									</section>

								<!-- Contact -->
									<section>
										<h2>Get in touch</h2>
										<div>
											<div class="row">
												<div class="6u 12u(mobile)">
													<dl class="contact">
														<dt>Twitter</dt>
														<dd><a href="https://twitter.com/fsharpMake">@fsharpMake</a></dd>
														<dt>WWW</dt>
														<dd><a href="https://fake.build">fake.build</a></dd>
														<dt>Github</dt>
														<dd><a href="https://github.com/fsharp/FAKE/issues/new">Github</a></dd>
														<dt>F# Slack</dt>
														<dd><a href="https://fsharp.slack.com/">Slack</a></dd>
													</dl>
												</div>
												<!--<div class="6u 12u(mobile)">
													<dl class="contact">
														<dt>Address</dt>
														<dd>
															1234 Fictional Rd<br />
															Nashville, TN 00000-0000<br />
															USA
														</dd>
														<dt>Phone</dt>
														<dd>(000) 000-0000</dd>
													</dl>
												</div>-->
											</div>
										</div>
									</section>

							</div>
						</div>
						<div class="row">
							<div class="12u">
								<div id="copyright">
									<ul class="menu">
										<li>&copy; FAKE. All rights reserved</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li>
									</ul>
								</div>
							</div>
						</div>
					</footer>
				</div>

		</div>

		<!-- Scripts -->
			<!--<script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>-->
			<script src="assets/js/tips.js" type="text/javascript"></script>
			<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/skel-viewport.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>
