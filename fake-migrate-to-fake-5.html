<!DOCTYPE HTML>

<html>
	<head>
		<title>The FAKE 5 Migration Guide
</title>
		<meta charset="utf-8" />
		<meta name="author" content="Steffen Forkmann, Mauricio Scheffer, Colin Bull, Matthias Dittrich" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link type="text/css" rel="stylesheet" href="assets/css/style.css">
		<!--<link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">-->
		<link rel="stylesheet" href="assets/css/iconmonstr-iconic-font.css" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
	</head>
	<body class="no-sidebar">
		<div id="page-wrapper">


			<!-- Header Wrapper -->
				<div id="header-wrapper">
					<div class="container">
						<!-- Header -->
							<header id="header">
								<div class="inner">

									<!-- Logo -->
										<h1><a href="index.html" id="logo">FAKE 5</a></h1>

									<!-- Nav -->
										<nav id="nav">
											<ul>
												<li >
													<a href="legacy-index.html">FAKE 4</a>
													<ul>
														<li><a href="legacy-gettingstarted.html">Getting Started Tutorial</a></li>
														<li><a href="help-docs.html">Where is XYZ???</a></li>
														<li><a href="legacy-commandline.html">Running FAKE from command line</a></li>
														<li><a href="legacy-core-targets.html">Targets</a></li>
													</ul>
												</li>
                                                <li >
                                                    <a href="fake-what-is-fake.html">Tutorials</a>
                                                    <ul>
                                                        <li><a href="fake-gettingstarted.html">Getting Started Tutorial</a></li>
                                                        <li><a href="fake-cache.html">Build script caching</a></li>
                                                        <li><a href="fake-commandline.html">Running FAKE from command line</a></li>
                                                        <li><a href="fake-dotnetcore.html">FAKE 5 quickstart</a></li>
                                                        <li><a href="fake-migrate-to-fake-5.html">FAKE 5 migration</a></li>
                                                        <li><a href="fake-debugging.html">Debugging Scripts</a></li>
                                                    </ul>
                                                </li>
												<li >
													<a href="fake-what-is-fake.html">Project</a>
													<ul>
														<li><a href="help-users.html">Who is using FAKE?</a></li>
														<li><a href="https://www.nuget.org/packages/FAKE">NuGet</a></li>
														<li><a href="https://chocolatey.org/packages/fake">Chocolatey</a></li>
														<li><a href="https://github.com/fsharp/FAKE"><i style="font-size: 15px;" class="im im-github"></i> GitHub</a></li>
														<li><a href="https://github.com/fsharp/FAKE/blob/master/License.txt">License</a></li>
														<li><a href="RELEASE_NOTES.html">Release Notes</a></li>
														<li><a href="contributing.html">Contributing</a></li>
														<li><a href="https://github.com/fsharp/FAKE/issues/new"><i style="font-size: 15px;" class="im im-mail"></i> Ask a question or report a bug</a></li>
													</ul>
												</li>
												<li class="current_page_item">
													<a href="fake-fake5-modules.html">Modules</a>
													<ul>
														<li>
															<a href="apidocs/index.html#Fake.Api">API</a>
															<ul>
																<li><a href="api-slack.html">Slack</a></li>
															</ul>
														</li>
														<li>
															<a href="core.html">Core</a>
															<ul>
																<li><a href="core-targets.html">Targets</a></li>
																<li><a href="apidocs/fake-core-environment.html.html">Environment</a></li>
																<li><a href="core-process.html">Process</a></li>
																<li><a href="apidocs/fake-core-string.html">String</a></li>
																<li><a href="apidocs/fake-core-buildserver.html">BuildServer</a></li>
																<li><a href="core-trace.html">Trace</a></li>
																<li><a href="core-commandlineparsing.html">CommandLineParsing</a></li>
																<li><a href="apidocs/fake-core-context.html">Context</a></li>
																<li><a href="apidocs/fake-core-xml.html">Xml</a></li>
																<li><a href="apidocs/fake-core-taskrunner.html">Tasks</a></li>
																<li><a href="apidocs/fake-core-releasenotes.html">ReleaseNotes</a></li>
																<li><a href="apidocs/fake-core-changelog.html">ChangeLog</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.IO">IO</a>
															<ul>
																<li><a href="apidocs/index.html#Fake.IO">FileSystem</a></li>
																<li><a href="apidocs/fake-io-changewatcher.html">Change Watcher</a></li>
																<li><a href="apidocs/fake-io-globbing-operators.html">Globbing</a></li>
																<li><a href="apidocs/fake-io-zip.html#Functions and values">Zip</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.DotNet">DotNet</a>
															<ul>
																<li><a href="dotnet-cli.html">Cli</a></li>
																<li><a href="dotnet-assemblyinfo.html">AssemblyInfoFile</a></li>
																<li><a href="apidocs/fake-dotnet-msbuild.html">MSBuild</a></li>
																<li><a href="apidocs/fake-dotnet-testing-nunit3.html">Testing - NUnit</a></li>
																<li><a href="apidocs/fake-dotnet-testing-mspec.html">Testing - MSpec</a></li>
																<li><a href="apidocs/fake-dotnet-testing-xunit2.html">Testing - XUnit2</a></li>
																<li><a href="apidocs/fake-dotnet-testing-expecto.html">Testing - Expecto</a></li>
																<li><a href="fake-dotnet-testing-specflow.html">Testing - SpecFlow</a></li>
																<li><a href="dotnet-testing-opencover.html">Testing - OpenCover</a></li>
																<li><a href="dotnet-nuget.html">NuGet</a></li>
																<li><a href="apidocs/fake-dotnet-mage.html">Mage</a></li>
																<li><a href="apidocs/fake-dotnet-paket.html">Paket</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.Net">Net</a>
															<ul>
																<li><a href="net-http.html">Http</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.Tools.Git">Tools</a>
															<ul>
																<li><a href="apidocs/index.html#Fake.Tools.Git">Git</a></li>
																<li><a href="fake-tools-pickles.html">Pickles</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.Windows">Windows</a>
															<ul>
																<li><a href="windows-chocolatey.html">Chocolatey</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.Testing">Testing</a>
															<ul>
																<li><a href="testing-sonarqube.html">SonarQube</a></li>
																<li><a href="testing-reportgenerator.html">ReportGenerator</a></li>
															</ul>
														</li>
														<li>
															<a href="buildserver.html">BuildServer</a>
															<ul>
																<li><a href="apidocs/index.html#Fake.BuildServer">Api-Reference</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.Sql">Sql</a>
															<ul>
																<li><a href="sql-dacpac.html">DacPac</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.Azure">Azure</a>
															<ul>
																<li><a href="apidocs/fake-azure-cloudservices.html">CloudServices</a></li>
																<li><a href="apidocs/fake-azure-emulators.html">Emulators</a></li>
																<li><a href="apidocs/fake-azure-kudu.html">Kudu</a></li>
																<li><a href="apidocs/fake-azure-webjobs.html">WebJobs</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake.Documentation">Documentation</a>
															<ul>
																<li><a href="apidocs/fake-documentation-docfx.html">DocFx</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake">Legacy / Not Migrated</a>
															<ul>
																<li><a href="todo-fluentmigrator.html">?.?.FluentMigrator</a></li>
																<li><a href="todo-androidpublisher.html">?.?.AndroidPublisher</a></li>
																<li><a href="todo-wix.html">Windows.WiX</a></li>
																<li><a href="todo-msteamsnotification.html">API.MsTeams</a></li>
																<li><a href="todo-stylecop.html">DotNet.StyleCop</a></li>
																<li><a href="todo-deploy.html">Fake.Deploy</a></li>
																<li><a href="todo-iis.html">?.?.IIS</a></li>
																<li><a href="todo-vagrant.html">?.?.Vagrant</a></li>
															</ul>
														</li>
														<li>
															<a href="apidocs/index.html#Fake">Legacy / Not Migrated (2)</a>
															<ul>
																<li><a href="todo-fxcop.html">DotNet.FxCop</a></li>
																<li><a href="todo-fsc.html">DotNet.Fsc</a></li>
																<li><a href="todo-canopy.html">DotNet.Testing.Canopy</a></li>
																<li><a href="todo-octopusdeploy.html">?.?.OctopusDeploy</a></li>
																<li><a href="todo-typescript.html">JavaScript?.TypeScript</a></li>
															</ul>
														</li>
													</ul>
												</li>
												<li ><a href="apidocs/index.html">API Reference</a></li>
											</ul>
										</nav>

								</div>
							</header>

						<!-- Banner -->
							

					</div>
				</div>

			<!-- Main Wrapper -->
				<div id="main-wrapper">
          			

					<div class="wrapper style2">
						<div class="inner">
							<div class="container">
								<div id="content">

									<!-- Content -->
                      <article>
<h1><a name="The-FAKE-5-Migration-Guide" class="anchor" href="#The-FAKE-5-Migration-Guide">The FAKE 5 Migration Guide</a></h1>
<h2><a name="Intro" class="anchor" href="#Intro">Intro</a></h2>
<p>In this tutorial you will learn how to migrate your existing build scripts to the new FAKE 5 dotnet-core version.</p>
<p>First we want you to know that there are two versions of FAKE 5. One is just an update to the regular FAKE 4, but also contains the new API.
We will call this the "legacy FAKE version" it is just like the FAKE you are already used to. The second version is the "new/dotnetcore/standalone FAKE 5" or just "FAKE 5".
This "new" version has several advantages:</p>
<ul>
<li>It can run without Mono or .Net installed</li>
<li>It is extendible via paket</li>
<li>Paket bootstrapper / build.cmd and build.sh are no longer required (you can still use them)</li>
<li>This will be the only Version available in FAKE 6</li>
</ul>
<p>Therefore you have the FAKE 5 timeframe to update your build scripts to the new version. If you have any issues in the migration process, please see <a href="/contributing.html">how to fill issues or discuss about your issues</a> (don't be shy about contributing ;)).</p>
<h2><a name="Migration-Guide" class="anchor" href="#Migration-Guide">Migration Guide</a></h2>
<p>Upgrading to FAKE 5 is a multi step process and has various manual steps in between. <strong>If you do these steps out of order it will be a lot harder for you to migrate the script successfully</strong>. Here are the steps:</p>
<ul>
<li>
<p>Update to legacy FAKE 5. This should not be breaking. If it breaks you please open an issue.</p>
<ul>
<li><p>With Paket: add <code>prerelease</code> after <code>nuget FAKE</code> in paket.dependencies file then <code>.paket/paket.exe update</code>, check that paket.lock references FAKE version 5</p></li>
</ul>
</li>
<li>
<p>Fix all the (obsolete) warnings in your build-script to use the new API (see the <a href="#Use-the-new-FAKE-API">Use the new FAKE-API</a> section).
This should still not break your build. If things break here or you have difficulties after reading the 'Use the new FAKE-API' section
please open an issue.</p>
<ul>
<li><p>Becareful if you update only some warning, it could break. For example, if you use <code>Target.Create</code>, but continue to use old operators definition, you will probably experiment some errors like "Target [...] is not defined".</p></li>
</ul>
</li>
<li>
<p>Change to the new version of FAKE 5.</p>
<ul>
<li>
<p>This is for example done by installing FAKE as dependency on your build infrastructure.
There are a variety of <a href="fake-gettingstarted.html#Install-FAKE">installing options</a> available.</p>
</li>
<li>
<p>Tell FAKE which <a href="fake-fake5-modules.html">modules</a> you need.
See the <a href="#Adding-FAKE-dependencies">Adding FAKE dependencies</a> section below.</p>
</li>
<li>
<p>Run the build with the new version of FAKE :). You might want to read the <a href="#CLI-Migration">CLI migration</a> section</p>
<p>If things break in the last step please let us know as well.</p>
</li>
</ul>
</li>
</ul>
<h3><a name="Use-the-new-FAKE-API" class="anchor" href="#Use-the-new-FAKE-API">Use the new FAKE-API</a></h3>
<p>After upgrading to legacy FAKE 5 the warnings should tell you exactly what you do. If there is stuff missing or a warning message should be improved let us know.
Some warnings indicate how we want the new FAKE version to be used.</p>
<p>The most important part to know is that basically every feature/function changes its location and sometimes they were even grouped in different modules
as the old API was growing several years now and we never could do breaking changes.</p>
<blockquote>
<p>IMPORTANT NOTE: If you feel like an API is still in the wrong place. Please let us know and open an issue.
We can make breaking changes as long as we are in the alpha/beta phase.
IMPORTANT NOTE: It's obvious from the NOTE above, but we are still figuring out the new API (even if I'm quite happy with its current state).
So things might break in the alpha phase. However this doesn't mean you should be afraid to use the new FAKE version.
In fact due to the modular design we hopefully can make breaking changes a lot more often, without breaking your builds!
So please try it out and if stuff breaks let us know :).
The good thing is you can always "lock" the versions of the FAKE modules until you are ready to upgrade.</p>
</blockquote>
<p>In this new work you should write "Module.Method a b" instead of "MethodModule a b". Which means in the old world we had lots of methods like
"ReadFile argument" (the module probably even opened via <code>[&lt;AutoOpen&gt;]</code>), which is considered bad style now.
In the new world we would open the <code>Fake.IO.FileSystem</code> namespace to indicate that we are using the file-system.
At the same time we would write <code>File.Read argument</code>, which is only a bit longer but now the IDE can help you a lot better and the code looks a lot more ideomatic and clean.</p>
<blockquote>
<p>If you still find places where we use the "bad" style in the new API, let us know (open an issue).</p>
</blockquote>
<p>The "open Fake" and AutoOpen modules are completely obsolete.
We urge you to finish your API-Migration (after fixing all warnings) by removing "open Fake".
This removes a lot of automatically opened stuff and if your build fails you have probably stuff where we forgot to add the obsolete warning (let us know) or that
stuff you are using was not migrated yet (let us know or send a PR, TODO: Add link to guideline).</p>
<h3><a name="Add-FAKE-dependencies" class="anchor" href="#Add-FAKE-dependencies">Add FAKE dependencies</a></h3>
<p>All your dependencies no longer are bundled with the FAKE nuget package (or the FAKE distribution for that matter). This has some advantages:</p>
<ul>
<li>You can extend the build with your own packages easily</li>
<li>You only pay what you use</li>
<li>You can use the FAKE libries in your regular scripts (as all FAKE modules are regular NuGet packages you can use in your projects as well).</li>
</ul>
<p>The drawback however is that you now need to know where stuff lives and add those packages to your build.</p>
<p>Already a paket user?</p>
<p>For now its quite simple: The namespace or module name is used as the package name, just search for the package and then
add it to the dependencies file to a new group (for example <code>netcorebuild</code>).</p>
<p>Not a paket user?</p>
<p>No problem! For most use-cases it is enough to find the NuGet package of the module (most times they have the same name for easier discovery) and add it to your script:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="pp">#r</span> <span class="s">&quot;paket:</span>
<span class="s">nuget Fake.Targets prerelease</span>
<span class="s">nuget MyPackage1</span>
<span class="s">nuget MyPackage2&quot;</span>
</code></pre></td>
</tr>
</table>
<p>to your build script. Now delete <code>&lt;script&gt;.fsx.lock</code> and run <code>fake run &lt;script&gt;.fsx</code> now you can use intellisense to start using the modules.</p>
<blockquote>
<p>If you want to read more about the possible syntax you can use here, please consult <a href="https://fsprojects.github.io/Paket/dependencies-file.html">https://fsprojects.github.io/Paket/dependencies-file.html</a> and <a href="https://fsprojects.github.io/Paket/nuget-dependencies.html.">https://fsprojects.github.io/Paket/nuget-dependencies.html.</a></p>
</blockquote>
<p>Once you feel more confident with using to paket infrastructure you can move your dependencies into a <code>paket.dependencies</code> group and use</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="pp">#r</span> <span class="s">&quot;paket: groupref netcorebuild //&quot;</span>
</code></pre></td>
</tr>
</table>
<h3><a name="CLI-Migration" class="anchor" href="#CLI-Migration">CLI Migration</a></h3>
<p>Yes we even broke the CLI. The old CLI was actually a mixture of two different CLI styles, confused a lot of users and to be honest was an ugly hack.
It was obvious that we would not even try to make things compatible with it in any way.
However your changes should only be minimal in the most cases. I'd say in 80% its just about adding the <code>run</code> verb between the <code>fake.exe</code> and the build script.
<code>fake build.fsx</code> will be <code>fake run build.fsx</code>. Running a particular target is as easy <code>fake target</code> will be <code>fake run build.fsx --target target</code>.
For a full reference use <code>--help</code> or the <a href="fake-commandline.html">documentation</a>.</p>
<p>If you used special cases which aren't mentioned here please edit this page or open an issue.</p>


                      </article>
								</div>
							</div>
						</div>
					</div>

				</div>

			<!-- Footer Wrapper -->
				<div id="footer-wrapper">
					<footer id="footer" class="container">
						<div class="row">
							<div class="3u 12u(mobile)">

								<!-- Links -->
									<section>
										<h2>Important Links</h2>
										<ul class="divided">
											<li><a href="fake-gettingstarted.html">Getting started</a></li>
											<li><a href="fake-fake5-modules.html">Modules</a></li>
											<li><a href="fake-fake5-modules.html#Declaring-FAKE-5-Header">FAKE Header</a></li>
										</ul>
									</section>

							</div>
							<div class="3u 12u(mobile)">

								<!-- Links -->
									<section>
										<h2>Further projects</h2>
										<ul class="divided">
											<li><a href="https://fsprojects.github.io/Paket/">Paket</a></li>
											<li><a href="https://fsprojects.github.io/FSharp.Formatting/">FSharp Formatting</a></li>
											<li><a href="http://fsharp.org/">F#</a></li>
											<li><a href="http://ionide.io/">Ionide</a></li>
											<li><a href="http://forge.run/">Forge</a></li>
											<li><a href="https://fsharp.github.io/FSharp.Compiler.Service/">FSharp.Compiler.Service</a></li>
										</ul>
									</section>

								<!-- Links
									<section>
										<h2>Learn F#</h2>
										<ul class="divided">
											<li><a href="404.html">Tutorial 1</a></li>
											<li><a href="404.html">Tutorial 2</a></li>
											<li><a href="404.html">Tutorial 3</a></li>
											<li><a href="404.html">Tutorial 4</a></li>
										</ul>
									</section>-->

							</div>
							<div class="6u 12u(mobile)">

								<!-- About -->
									<section>
										<h2><strong>FAKE 5</strong> is a community effort.</h2>
										<p>Please help with the development of <strong>FAKE 5</strong>, a free, fully open source
										DSL and Runtime for running F# scripts. Look at the open issues at <a href="https://github.com/fsharp/FAKE/issues">Github</a>,
                                        discuss new features, fix bugs and send pull requests!</p>
										<a href="contributing.html" class="button alt icon fa-arrow-circle-right">Learn More</a>
									</section>

								<!-- Contact -->
									<section>
										<h2>Get in touch</h2>
										<div>
											<div class="row">
												<div class="6u 12u(mobile)">
													<dl class="contact">
														<dt>Twitter</dt>
														<dd><a href="https://twitter.com/fsharpMake">@fsharpMake</a></dd>
														<dt>WWW</dt>
														<dd><a href="https://fake.build">fake.build</a></dd>
														<dt>Github</dt>
														<dd><a href="https://github.com/fsharp/FAKE/issues/new">Github</a></dd>
														<dt>F# Slack</dt>
														<dd><a href="https://fsharp.slack.com/">Slack</a></dd>
													</dl>
												</div>
												<!--<div class="6u 12u(mobile)">
													<dl class="contact">
														<dt>Address</dt>
														<dd>
															1234 Fictional Rd<br />
															Nashville, TN 00000-0000<br />
															USA
														</dd>
														<dt>Phone</dt>
														<dd>(000) 000-0000</dd>
													</dl>
												</div>-->
											</div>
										</div>
									</section>

							</div>
						</div>
						<div class="row">
							<div class="12u">
								<div id="copyright">
									<ul class="menu">
										<li>&copy; FAKE. All rights reserved</li>
										<li>Design: <a href="https://html5up.net">HTML5 UP</a></li>
										<li>Page generated with Version: <a href="https://github.com/fsharp/FAKE/releases">5.0.0-rc008</a></li>
									</ul>
								</div>
							</div>
						</div>
					</footer>
				</div>

		</div>

		<!-- Scripts -->
			<!--<script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>-->
			<script src="assets/js/tips.js" type="text/javascript"></script>
			<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/skel-viewport.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>
