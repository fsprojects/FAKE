/* jquery.dropotron.js v1.4.3 (+ fix from https://github.com/ajlkn/jquery.dropotron/pull/14) | (c) n33 | n33.co | MIT licensed */
(function(e){e.fn.disableSelection_dropotron=function(){return e(this).css("user-select","none").css("-khtml-user-select","none").css("-moz-user-select","none").css("-o-user-select","none").css("-webkit-user-select","none")},e.fn.dropotron=function(t){if(this.length==0)return e(this);if(this.length>1)for(var n=0;n<this.length;n++)e(this[n]).dropotron(t);return e.dropotron(e.extend({selectorParent:e(this)},t))},e.dropotron=function(t){var n=e.extend({selectorParent:null,baseZIndex:1e3,menuClass:"dropotron",expandMode:"hover",hoverDelay:150,hideDelay:250,openerClass:"opener",openerActiveClass:"active",submenuClassPrefix:"level-",mode:"fade",speed:"fast",easing:"swing",alignment:"left",offsetX:0,offsetY:0,globalOffsetY:0,IEOffsetX:0,IEOffsetY:0,noOpenerFade:!0,detach:!0,cloneOnDetach:!0},t),r=n.selectorParent,i=r.find("ul"),s=e("body"),o=e("body,html"),u=e(window),a=!1,f=null,l=null;r.on("doCollapseAll",function(){i.trigger("doCollapse")}),i.each(function(){var t=e(this),r=t.parent();n.hideDelay>0&&t.add(r).on("mouseleave",function(e){window.clearTimeout(l),l=window.setTimeout(function(){t.trigger("doCollapse")},n.hideDelay)}),t.disableSelection_dropotron().hide().addClass(n.menuClass).css("position","absolute").on("mouseenter",function(e){window.clearTimeout(l)}).on("doExpand",function(){if(t.is(":visible"))return!1;window.clearTimeout(l),i.each(function(){var t=e(this);e.contains(t.get(0),r.get(0))||t.trigger("doCollapse")});var s=r.offset(),o=r.position(),f=r.parent().position(),c=r.outerWidth(),h=t.outerWidth(),p=t.css("z-index")==n.baseZIndex,d,v,m,g;if(p){n.detach?d=s:d=o,g=d.top+r.outerHeight()+n.globalOffsetY,v=n.alignment,t.removeClass("left").removeClass("right").removeClass("center");switch(n.alignment){case"right":m=d.left-h+c,m<0&&(m=d.left,v="left");break;case"center":m=d.left-Math.floor((h-c)/2),m<0?(m=d.left,v="left"):m+h>u.width()&&(m=d.left-h+c,v="right");break;case"left":default:m=d.left,m+h>u.width()&&(m=d.left-h+c,v="right")}t.addClass(v)}else{r.css("position")=="relative"||r.css("position")=="absolute"?(g=n.offsetY,m=-1*o.left):(g=o.top+n.offsetY,m=0);switch(n.alignment){case"right":m+=-1*r.parent().outerWidth()+n.offsetX;break;case"center":case"left":default:m+=r.parent().outerWidth()+n.offsetX}}navigator.userAgent.match(/MSIE ([0-9]+)\./)&&RegExp.$1<8&&(m+=n.IEOffsetX,g+=n.IEOffsetY),t.css("left",m+"px").css("top",g+"px").css("opacity","0.01").show();var y=!1;r.css("position")=="relative"||r.css("position")=="absolute"?m=-1*o.left:m=0,t.offset().left<0?(m+=r.parent().outerWidth()-n.offsetX,y=!0):t.offset().left+h>u.width()&&(m+=-1*r.parent().outerWidth()-n.offsetX,y=!0),y&&t.css("left",m+"px"),t.hide().css("opacity","1");switch(n.mode){case"zoom":a=t,r.addClass(n.openerActiveClass),t.animate({width:"toggle",height:"toggle"},n.speed,n.easing,function(){a=!1});break;case"slide":a=t,r.addClass(n.openerActiveClass),t.animate({height:"toggle"},n.speed,n.easing,function(){a=!1});break;case"fade":a=t;if(p&&!n.noOpenerFade){var y;n.speed=="slow"?y=80:n.speed=="fast"?y=40:y=Math.floor(n.speed/2),r.fadeTo(y,.01,function(){r.addClass(n.openerActiveClass),r.fadeTo(n.speed,1),t.fadeIn(n.speed,function(){a=!1})})}else r.addClass(n.openerActiveClass),r.fadeTo(n.speed,1),t.fadeIn(n.speed,function(){a=!1});break;case"instant":default:r.addClass(n.openerActiveClass),t.show()}return!1}).on("doCollapse",function(){return t.is(":visible")?(t.hide(),r.removeClass(n.openerActiveClass),t.find("."+n.openerActiveClass).removeClass(n.openerActiveClass),t.find("ul").hide(),!1):!1}).on("doToggle",function(e){return t.is(":visible")?t.trigger("doCollapse"):t.trigger("doExpand"),!1}),r.disableSelection_dropotron().addClass("opener").css("cursor","pointer").on("click touchend",function(e){if(a==t)return;e.preventDefault(),e.stopPropagation(),t.trigger("doToggle")}),n.expandMode=="hover"&&r.hover(function(e){if(a==t)return;f=window.setTimeout(function(){t.trigger("doExpand")},n.hoverDelay)},function(e){window.clearTimeout(f)})}),i.find("a").css("display","block").on("click touchend",function(t){if(a==e(this))return;e(this).attr("href").length<1&&t.preventDefault()}),r.find("li").css("white-space","nowrap").each(function(){var t=e(this),n=t.children("a"),i=t.children("ul"),s=n.attr("href");n.on("click touchend",function(e){s.length==0||s=="#"?e.preventDefault():e.stopPropagation()}),n.length>0&&i.length==0&&t.on("click touchend",function(e){if(a==t)return;r.trigger("doCollapseAll"),e.stopPropagation()})}),r.children("li").each(function(){var t=e(this),r=t.children("ul"),i;if(r.length>0){n.detach&&(n.cloneOnDetach&&(i=r.clone(),i.attr("class","").hide().appendTo(r.parent())),r.detach().appendTo(s));for(var o=n.baseZIndex,u=1,a=r;a.length>0;u++)a.css("z-index",o++),n.submenuClassPrefix&&a.addClass(n.submenuClassPrefix+(o-1-n.baseZIndex)),a=a.find("> li > ul")}}),u.on("scroll",function(){r.trigger("doCollapseAll")}).on("keypress",function(e){!a&&e.keyCode==27&&(e.preventDefault(),r.trigger("doCollapseAll"))}),o.on("click touchend",function(){a||r.trigger("doCollapseAll")})}})(jQuery);